<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
<body>
    <script>
        function numberWithCommas(x) {
            return (x+'').replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        let loan = 10000000;
        let loanRate = 0.05;
        let loanPeriod = 24;
        let unredeemedTerm = 0;
        
        let repayment = Math.floor( (loan * (loanRate/12) * Math.pow((1 + loanRate/12), loanPeriod)) / (Math.pow((1 + loanRate/12), loanPeriod) - 1));
        
        let principal_payment_array = [];
        let interest_array = [];
        let balance_array = [];
        let accumulative_principal_payment_array = [];
        
        let interest = Math.floor(loan * loanRate/12);
        let principal_payment = repayment - interest;
        let balance = loan - principal_payment;
        let accumulative_principal_payment = principal_payment;
        
        console.log("loanPeriod * repayment = " + numberWithCommas(loanPeriod*repayment));
        
        for(i = 0; i < loanPeriod; i++) {
            interest_array.push(interest);
            principal_payment_array.push(principal_payment);
            balance_array.push(balance);
            accumulative_principal_payment_array.push(accumulative_principal_payment);

            console.log("-------------------- No " + (i + 1) + ". --------------------");
            console.log("repayment : " + numberWithCommas(repayment));
            console.log("interest : " + numberWithCommas(interest_array[i]));
            console.log("principal payment : " + numberWithCommas(principal_payment_array[i]));
            console.log("interest + principal payment : " + numberWithCommas(interest_array[i] + principal_payment_array[i]));
            console.log("balance : " + numberWithCommas(balance_array[i]));
            console.log("accumulative principal payment : " + numberWithCommas(accumulative_principal_payment_array[i]));
            document.write("        <div class=\"row cell-margin\">"
                         + "            <div id=\"col-num\" class=\"num_color col_height col_text_center border border-secondary\">" + (i + 1) + "</div>"
                         + "            <div id=\"col-size1\" class=\"col_height col_text_center border border-secondary\">" + numberWithCommas(repayment) + "</div>"
                         + "            <div id=\"col-size1\" class=\"col_height col_text_center border border-secondary\">" + numberWithCommas(principal_payment_array[i]) +"</div>"
                         + "            <div id=\"col-size1\" class=\"col_height col_text_center border border-secondary\">" + numberWithCommas(interest_array[i]) + "</div>"
                         + "            <div id=\"col-size2\" class=\"col_height col_text_center border border-secondary\">" + numberWithCommas(accumulative_principal_payment_array[i]) + "</div>"
                         + "            <div id=\"col-size2\" class=\"col_height col_text_center border border-secondary\">" + numberWithCommas(balance_array[i]) + "</div>"
                         + "        </div>");
            interest = Math.floor(balance_array[i] * loanRate / 12);
            principal_payment = repayment - interest;
            balance = balance_array[i] - principal_payment;
            accumulative_principal_payment += principal_payment;
        }
        
    </script>
</body>
</html>